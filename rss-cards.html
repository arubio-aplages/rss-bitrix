<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Últimas publicaciones</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
<style>
  :root{
    --w:70%;
    --gap:24px;
    --radius:3px;
    --shadow:0 6px 18px rgba(0,0,0,.06);
    --label:#ee7b19;
    --label-text:#fff;
  }
  body{margin:0;background:#fff;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
  #rss-grid{width:100%;}
  #rss-grid .rss-container{width:var(--w);margin:24px auto;}
  #rss-grid .rss-list{
    display:grid;gap:var(--gap);
    grid-template-columns:repeat(4,minmax(0,1fr));
    align-items:stretch;
  }
  @media (max-width:1200px){#rss-grid .rss-list{grid-template-columns:repeat(3,1fr);}}
  @media (max-width:900px){#rss-grid .rss-list{grid-template-columns:repeat(2,1fr);}}
  @media (max-width:600px){#rss-grid .rss-list{grid-template-columns:1fr;}}

  .post-card{
    display:flex;flex-direction:column;height:100%;
    border:1px solid rgba(0,0,0,.08);border-radius:var(--radius);
    overflow:hidden;background:#fff;box-shadow:var(--shadow);
  }
  .image-wrap{position:relative;width:100%;aspect-ratio:16/9;background:#f2f4f7;overflow:hidden;}
  .image-wrap img{width:100%;height:100%;object-fit:cover;display:block;}
  .badge{
    position:absolute;top:12px;right:12px;background:var(--label);color:var(--label-text);
    font-size:12px;font-weight:600;padding:6px 10px;border-radius:999px;
    box-shadow:0 2px 8px rgba(0,0,0,.15);max-width:65%;
    white-space:nowrap;text-overflow:ellipsis;overflow:hidden;
  }
  .content{padding:16px;display:flex;flex-direction:column;gap:10px;flex:1;}
  .title{
    font-size:18px;line-height:1.25;font-weight:600;color:#0b1220;margin:0;
    display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:46px;
  }
  .excerpt{
    font-size:14px;line-height:1.55;color:#4a5568;margin:0;
    display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;min-height:87px;
  }
  .post-link{text-decoration:none;color:inherit;display:flex;flex-direction:column;height:100%;}
  .skeleton{
    animation:shimmer 1.2s infinite linear;
    background:linear-gradient(90deg,#eee 25%,#f7f7f7 37%,#eee 63%);
    background-size:400% 100%;
  }
  @keyframes shimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}
</style>
</head>
<body>
<section id="rss-grid">
  <div class="rss-container">
    <div class="rss-list" role="list"></div>
    <div class="rss-error" hidden>No se pudo cargar el feed.</div>
  </div>
</section>

<script>
(function () {
  const FEED = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent("https://tuasesorprofesional.com/feed/");
  const LIST = document.querySelector(".rss-list");
  const ERROR = document.querySelector(".rss-error");
  const MAX_POSTS = 4;
  const MAX_WORDS = 28;

  // skeletons
  for (let i=0;i<MAX_POSTS;i++){
    const sk=document.createElement("div");
    sk.className="post-card";
    sk.innerHTML=`<div class="image-wrap skeleton"></div>
      <div class="content">
        <h3 class="title skeleton" style="height:42px;border-radius:8px;"></h3>
        <p class="excerpt skeleton" style="height:88px;border-radius:8px;"></p>
      </div>`;
    LIST.appendChild(sk);
  }

  fetch(FEED)
    .then(r=>r.json())
    .then(data=>{
      if(!data.items || !data.items.length) throw new Error();
      const items = data.items.slice(0,MAX_POSTS);
      LIST.innerHTML="";
      items.forEach(it=>{
        const title = it.title || "";
        const link  = it.link || "#";
        const cat   = (it.categories && it.categories[0]) || "General";
        const html  = it.content || it.description || "";
        const excerpt = toExcerpt(html, MAX_WORDS);
        const img = it.thumbnail || extractImg(html) || "";

        LIST.appendChild(buildCard({title, link, category:cat, excerpt, image:img}));
      });
    })
    .catch(()=>{
      LIST.innerHTML=""; ERROR.hidden=false;
    });

  function buildCard({title, link, category, excerpt, image}){
    const card = document.createElement("article");
    card.className = "post-card";
    card.innerHTML = `
      <a class="post-link" href="${link}" target="_blank" rel="noopener">
        <div class="image-wrap">
          ${image ? `<img src="${image}" alt="" loading="lazy" decoding="async" />` : `<div class="skeleton" style="width:100%;height:100%;"></div>`}
          <span class="badge">${esc(category)}</span>
        </div>
        <div class="content">
          <h3 class="title">${esc(title)}</h3>
          <p class="excerpt">${esc(excerpt)}</p>
        </div>
      </a>`;
    return card;
  }
  function toExcerpt(html, maxWords){
    const txt = strip(html).replace(/\s+/g," ").trim();
    const words = txt.split(" ").filter(Boolean);
    return words.length <= maxWords ? txt : words.slice(0,maxWords).join(" ") + "…";
  }
  function strip(s){ const d=document.createElement("div"); d.innerHTML=s; return d.textContent || d.innerText || ""; }
  function extractImg(html){ const m = (html||"").match(/<img[^>]+src=["']([^"']+)["']/i); return m && m[1] ? m[1] : ""; }
  function esc(str){
    return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
                      .replace(/"/g,"&quot;").replace(/'/g,"&#39;");
  }
})();
</script>
</body>
</html>